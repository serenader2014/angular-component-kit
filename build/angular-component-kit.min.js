angular.module("ngComponentKit",["ngAnimate"]),angular.module("ngComponentKit").directive("ckDrag",function(){return function(t,n,i){function o(t){var i=t.pageX,p=t.pageY;n.append(c),a.off("mousedown",o),r.on("mousemove",e),r.on("mouseup",s),l=n.offset(),c.css({position:"absolute",top:0,left:0,width:n.width(),height:n.height(),background:"rgba(255,255,255,0.8)",cursor:"move"}),n.append(c),u.left=i,u.top=p,f.left=i-l.left,f.top=p-l.top}function e(t){var n=t.pageX,i=t.pageY;p.top=i-f.top,p.left=n-f.left,c.css({top:p.top-l.top,left:p.left-l.left})}function s(){r.off("mousemove",e),r.off("mouseup",s),a.on("mousedown",o),c.remove(),n.css({top:p.top,left:p.left})}var a=i.ckDrag?n.find(i.ckDrag):n,r=angular.element("body"),c=angular.element("<div></div>"),l={left:0,top:0},u={left:0,top:0},f={left:0,top:0},p={top:0,left:0};a.on("mousedown",o)}}),angular.module("ngComponentKit").factory("event",function(){var t=[].slice;return{list:{},on:function(t,n,i,o){return this.list[t]&&this.list[t].length?this.list[t].push({fn:n,context:i||this,once:o}):this.list[t]=[{fn:n,context:i||this,once:o}],this},emit:function(n){var i=t.call(arguments,1),o=this;this.list[n]&&this.list[n].length&&angular.forEach(this.list[n],function(t){t.once&&t.called||(t.fn.apply(t.context,i),t.called=!0)}),angular.forEach(this.list,function(t,i){var e=i.split(".");e.pop(),e.join(".")===n&&o.emit(i)})},off:function(t,n){if(this.list[t])if(n)for(var i=0;i<this.list[t].length;i+=1){var o=this.list[t][i];o.fn===n&&(this.list[t].splice(i,1),i-=1)}else this.list[t].splice(this.list[t].length)}}}),angular.module("ngComponentKit").directive("ckInput",["$compile",function(t){return{require:"ngModel",scope:{desc:"="},link:function(n,i,o,e){var s=['<span class="ck-input" ng-class="{up: hasValue, focus: focus, error: isError()}">','<span class="ck-input-desc">{{desc}}</span',"</span>"].join("");s=angular.element(t(s)(n)),i.before(s),s.append(i),i.on("focus",function(){n.focus=!0,n.$digest()}),i.on("blur",function(){n.focus=!1,n.$digest()}),n.$watch(function(){return e.$viewValue},function(t){n.hasValue=!!t}),n.isError=function(){return e.$invalid}}}}]),angular.module("ngComponentKit").directive("ckModal",function(){return{template:['<div tabindex="-1" ng-class="{active: active}" ng-blur="blur()"','ng-focus="focus()" ng-show="show" class="ck-modal" ck-drag=".ck-modal-head" >','<div class="ck-modal-head">{{title}}</div>','<div class="ck-modal-body" ng-transclude></div>','<div class="ck-modal-foot">','<button ng-click="ok()" class="ck-btn ck-btn-blue" ck-ripple>Comfirm</button>','<button ng-click="off($event)" class="ck-btn" ck-ripple="black">Close</button>',"</div></div>"].join(""),transclude:!0,scope:{title:"=name",confirm:"&",close:"&",show:"="},link:function(t,n,i){function o(){t.show=!1}var e=angular.element(document),s=angular.element(window).height(),a=angular.element(window).width();t.active=!1,a>800?t.$watch("show",function(i){t.active=!!i,i&&(n.css({top:e.scrollTop()+200,left:e.width()/2-400}),n.find(".ck-modal-body").css({maxHeight:s-400}))}):n.find(".ck-modal-body").css({maxHeight:s-132}),t.ok=function(){i.confirm?t.confirm({scope:t,close:o}):o()},t.off=function(){i.close?t.close({scope:t,close:o}):o()},t.blur=function(){t.active=!1},t.focus=function(){t.active=!0}},replace:!0}}),angular.module("ngComponentKit").factory("ckNotify",function(t,n,i){var o={type:"normal",msg:"",position:{top:!0,right:!0},autoHide:!0,callback:function(){}},e=0,s={},a=function(i){var s=t.$new();s=angular.extend(s,o,i),s.count=e,e+=1;var a=n("<notification></notification>")(s);return angular.element("body").append(a),setTimeout(function(){a.addClass("ck-in")},10),s};return i.on("notification.rendered",function(t){var n=t.id,o=t.height,e=t.position;s[e]=s[e]||{},s[e][n]=o;var a=10;angular.forEach(s[e],function(t,n){i.emit("notification."+n+"."+e+".rePosition",a),a+=t+10})}),i.on("notification.close",function(t,n){i.emit("notification.rendered",{id:t,height:-10,position:n})}),a.normal=function(t){return a({msg:t,type:"normal"})},a.success=function(t){return a({msg:t,type:"success"})},a.error=function(t){return a({msg:t,type:"error"})},a.warning=function(t){return a({msg:t,type:"warning"})},a}).directive("notification",function(t){var n={template:['<div class="ck-notification ck-{{type}}" ng-style="style"','><span>{{msg}}</span><button class="ck-btn" ck-ripple ','ng-click="close()">Close</button></div>'].join(""),restrict:"E",replace:!0,link:function(n,i){function o(t){n.style[e]=t,n.$digest()}var e=n.position.top?"top":"bottom";n.style={top:n.position.top?0:"auto",bottom:n.position.bottom?0:"auto",left:n.position.left?10:"auto",right:n.position.right?10:"auto"},setTimeout(function(){t.emit("notification.rendered",{id:n.count,height:i.height()+26,position:e})},10),t.on("notification."+n.count+"."+e+".rePosition",o),n.close=function(){i.addClass("ck-close"),setTimeout(function(){i.remove(),n.$destroy(),t.emit("notification.close",n.count,e),t.off("notification."+n.count+"."+e+".rePosition",o)},300),"function"==typeof n.callback&&n.callback.call(this,n)},n.autoHide&&setTimeout(function(){n.close()},3e3)}};return n}),angular.module("ngComponentKit").factory("ckProgressBar",function(){function t(){n+=1,this.instanceCount=n,this.count=0,this.autoIncrease=!1,this.intervalHandler=null,this.color="rgb(2, 141, 192)",this.status="wait",this.callbacks={}}var n=0;t.fn=t.prototype,t.fn.init=function(){var t=['<div class="ck-progress-wrapper"><span class="ck-progress-bar"><span class="ck-progress-bar-inner">','</span></span><span class="ck-progress-circle"></span></div>'].join("\n");return this.ele=angular.element(t),this.setColor(this.color),this.status="loading",angular.element("body").append(this.ele),this.trigger("init"),this},t.fn.start=function(){return"loading"!==this.status&&"prohibit"!==this.status?(this.init(),this.set(0),this.trigger("start"),this):void 0},t.fn.prohibit=function(){return this.status="prohibit",this},t.fn.increase=function(t){var n=this;if("loading"===this.status&&!this.autoIncrease)return t?(this.autoIncrease=!0,this.intervalHandler=setInterval(function(){return n.count=n.count+Math.floor(5*Math.random()),n.count>98?void n.stop():void n.set(n.count)},400)):this.set(this.count+Math.floor(5*Math.random())),this.trigger("increase"),this},t.fn.set=function(t){return"loading"===this.status?(this.count=t,this.ele.find(".ck-progress-bar").width(this.count+"%"),this.trigger("progress"),this):void 0},t.fn.stop=function(){return this.intervalHandler&&(clearInterval(this.intervalHandler),this.intervalHandler=null,this.autoIncrease=!1),this.trigger("stop"),this},t.fn.end=function(){if("loading"===this.status){var t=this;return this.stop(),this.set(100),this.autoIncrease=!1,setTimeout(function(){t.ele.fadeOut({duration:800,done:function(){t.count=0,t.status="wait",t.ele.remove(),t.trigger("end")}})},400),this}},t.fn.setColor=function(t){function n(t){var n=t.toString(16);return 1===n.length?"0"+n:n}function i(t){var i,o,e,s=t.match(/\((.*)\)/)[1].split(",");return i=+s[0],o=+s[1],e=+s[2],"#"+n(i)+n(o)+n(e)}function o(t){var n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(n,function(t,n,i,o){return n+n+i+i+o+o});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)].join(","):null}if(t){var e,s;return"#"===t[0]?(e=o(t),s=t):(e=t.match(/\((.*)\)/)[1],s=i(t)),this.color=s,this.ele.find(".ck-progress-bar").css({background:s,boxShadow:"0 0 10px 0 rgba("+e+",0.5)"}),this.ele.find(".ck-progress-bar-inner").css({background:s,boxShadow:"0 0 10px rgba("+e+",0.5)"}),this.ele.find(".ck-progress-circle").css({borderBottomColor:s,borderLeftColor:s}),this.trigger("setColor"),this}},t.fn.on=function(t,n,i){return this.callbacks[t]&&this.callbacks[t].length?this.callbacks[t].push({fn:n,context:i||this}):this.callbacks[t]=[{fn:n,context:i||this}],this},t.fn.trigger=function(t){return this.callbacks[t]&&this.callbacks[t].length?(this.callbacks[t].forEach(function(t){t.fn.call(t.context)}),this):void 0};var i={createInstance:function(){var n=new t;return this.instances.push(n),n},instances:[]};return i}),angular.module("ngComponentKit").directive("ckRipple",function(){return{link:function(t,n,i){n.addClass("ck-ripple");var o=n.find(".ck-ripple-ink");if("ck-ripple"!==i.ckRipple){var e=i.ckRipple;n.addClass("ck-ripple-"+e)}n.on("click",function(t){o.removeClass("ck-ripple-animate");var i=n.offset().left,e=n.offset().top,s=n[0].offsetWidth,a=n[0].offsetHeight,r=Math.max(s,a),c=t.pageX-i-r/2,l=t.pageY-e-r/2;o.css({width:r,height:r,top:l,left:c}),o.addClass("ck-ripple-animate")})},transclude:!0,template:'<span class="ck-ripple-ink"></span><span ng-transclude></span>'}}),angular.module("ngComponentKit").factory("template",function(){return function(t){var n,i=0,o='var text="';t.replace(/\${{(.*?)}}|$/g,function(n,e,s){o+=t.slice(i,s).replace(/"/g,'\\"'),i=s+n.length,o+='"+'+(e||'""')+'+"'}),o="with(obj){\n"+o+'";\n}\nreturn text;';try{n=new Function("obj",o)}catch(e){throw e.source=o,e}return function(t){return n.call(this,t)}}});