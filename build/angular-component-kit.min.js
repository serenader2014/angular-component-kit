angular.module("ngComponentKit",["ngAnimate"]),angular.module("ngComponentKit").directive("ckDrag",function(){return function(t,n,e){function i(t){var e=t.pageX,p=t.pageY;n.append(c),a.off("mousedown",i),r.on("mousemove",o),r.on("mouseup",s),l=n.offset(),c.css({position:"absolute",top:0,left:0,width:n.width(),height:n.height(),background:"rgba(255,255,255,0.8)",cursor:"move"}),n.append(c),u.left=e,u.top=p,f.left=e-l.left,f.top=p-l.top}function o(t){var n=t.pageX,e=t.pageY;p.top=e-f.top,p.left=n-f.left,c.css({top:p.top-l.top,left:p.left-l.left})}function s(){r.off("mousemove",o),r.off("mouseup",s),a.on("mousedown",i),c.remove(),n.css({top:p.top,left:p.left})}var a=e.ckDrag?n.find(e.ckDrag):n,r=angular.element("body"),c=angular.element("<div></div>"),l={left:0,top:0},u={left:0,top:0},f={left:0,top:0},p={top:0,left:0};a.on("mousedown",i)}}),angular.module("ngComponentKit").factory("event",function(){var t=[].slice;return{list:{},on:function(t,n,e,i){return this.list[t]&&this.list[t].length?this.list[t].push({fn:n,context:e||this,once:i}):this.list[t]=[{fn:n,context:e||this,once:i}],this},emit:function(n){var e=t.call(arguments,1),i=this;this.list[n]&&this.list[n].length&&angular.forEach(this.list[n],function(t){t.once&&t.called||(t.fn.apply(t.context,e),t.called=!0)}),angular.forEach(this.list,function(t,e){var o=e.split(".");o.pop(),o.join(".")===n&&i.emit(e)})},off:function(t,n){if(n)for(var e=0;e<this.list[t].length;e+=1){var i=this.list[t][e];i.fn===n&&(this.list[t].splice(e,1),e-=1)}else this.list[t].splice(this.list[t].length)}}}),angular.module("ngComponentKit").directive("ckInput",["$compile",function(t){return{require:"ngModel",scope:{desc:"="},link:function(n,e,i,o){var s=['<span class="ck-input" ng-class="{up: hasValue, focus: focus, error: isError()}">','<span class="ck-input-desc">{{desc}}</span',"</span>"].join("");s=angular.element(t(s)(n)),e.before(s),s.append(e),e.on("focus",function(){n.focus=!0,n.$digest()}),e.on("blur",function(){n.focus=!1,n.$digest()}),n.$watch(function(){return o.$viewValue},function(t){n.hasValue=!!t}),n.isError=function(){return o.$invalid}}}}]),angular.module("ngComponentKit").directive("ckModal",function(){return{template:['<div tabindex="-1" ng-class="{active: active}" ng-blur="blur()"','ng-focus="focus()" ng-show="show" class="ck-modal" ck-drag=".ck-modal-head" >','<div class="ck-modal-head">{{title}}</div>','<div class="ck-modal-body" ng-transclude></div>','<div class="ck-modal-foot">','<button ng-click="ok()" class="ck-btn ck-btn-blue" ck-ripple>Comfirm</button>','<button ng-click="off($event)" class="ck-btn" ck-ripple="black">Close</button>',"</div></div>"].join(""),transclude:!0,scope:{title:"=name",confirm:"&",close:"&",show:"="},link:function(t,n,e){function i(){t.show=!1}var o=angular.element(document),s=angular.element(window).height(),a=angular.element(window).width();t.active=!1,a>800?t.$watch("show",function(e){t.active=!!e,e&&(n.css({top:o.scrollTop()+200,left:o.width()/2-400}),n.find(".ck-modal-body").css({maxHeight:s-400}))}):n.find(".ck-modal-body").css({maxHeight:s-132}),t.ok=function(){e.confirm?t.confirm({scope:t,close:i}):i()},t.off=function(){e.close?t.close({scope:t,close:i}):i()},t.blur=function(){t.active=!1},t.focus=function(){t.active=!0}},replace:!0}}),angular.module("ngComponentKit").factory("ckNotify",function(t,n,e){var i={type:"normal",msg:"",position:{top:!0,right:!0},autoHide:!0,callback:function(){}},o=0,s={},a=function(e){var s=t.$new();s=angular.extend(s,i,e),s.count=o,o+=1;var a=n("<notification></notification>")(s);return angular.element("body").append(a),a.fadeIn(),s};return e.on("notification.rendered",function(t,n){s[t]=n;var i=10;angular.forEach(s,function(t,n){e.emit("notification."+n+".rePosition",i),i+=t+10})}),e.on("notification.close",function(t){e.emit("notification.rendered",t,-10)}),a.normal=function(t){return a({msg:t,type:"normal"})},a.success=function(t){return a({msg:t,type:"success"})},a.error=function(t){return a({msg:t,type:"error"})},a.warning=function(t){return a({msg:t,type:"warning"})},a}).directive("notification",function(t){var n={template:['<div class="ck-notification ck-{{type}}" ng-style="style"','><span>{{msg}}</span><button class="ck-btn" ck-ripple ','ng-click="close()">Close</button></div>'].join(""),restrict:"E",replace:!0,link:function(n,e){function i(t){n.style.top=t,n.$digest()}n.style={},setTimeout(function(){t.emit("notification.rendered",n.count,e.height()+26)},10),t.on("notification."+n.count+".rePosition",i),n.close=function(){e.fadeOut(function(){e.remove(),n.$destroy(),t.emit("notification.close",n.count),t.off("notification."+n.count+".rePosition",i)}),"function"==typeof n.callback&&n.callback.call(this,n)},n.autoHide&&setTimeout(function(){n.close()},3e3)}};return n}),angular.module("ngComponentKit").factory("ckProgressBar",function(){function t(){n+=1,this.instanceCount=n,this.count=0,this.autoIncrease=!1,this.intervalHandler=null,this.color="rgb(2, 141, 192)",this.status="wait",this.callbacks={}}var n=0;t.fn=t.prototype,t.fn.init=function(){var t=['<div class="ck-progress-wrapper"><span class="ck-progress-bar"><span class="ck-progress-bar-inner">','</span></span><span class="ck-progress-circle"></span></div>'].join("\n");return this.ele=angular.element(t),this.setColor(this.color),this.status="loading",angular.element("body").append(this.ele),this.trigger("init"),this},t.fn.start=function(){return"loading"!==this.status&&"prohibit"!==this.status?(this.init(),this.set(0),this.trigger("start"),this):void 0},t.fn.prohibit=function(){return this.status="prohibit",this},t.fn.increase=function(t){var n=this;if("loading"===this.status&&!this.autoIncrease)return t?(this.autoIncrease=!0,this.intervalHandler=setInterval(function(){return n.count=n.count+Math.floor(5*Math.random()),n.count>98?void n.stop():void n.set(n.count)},400)):this.set(this.count+Math.floor(5*Math.random())),this.trigger("increase"),this},t.fn.set=function(t){return"loading"===this.status?(this.count=t,this.ele.find(".ck-progress-bar").width(this.count+"%"),this.trigger("progress"),this):void 0},t.fn.stop=function(){return this.intervalHandler&&(clearInterval(this.intervalHandler),this.intervalHandler=null,this.autoIncrease=!1),this.trigger("stop"),this},t.fn.end=function(){if("loading"===this.status){var t=this;return this.stop(),this.set(100),this.autoIncrease=!1,setTimeout(function(){t.ele.fadeOut({duration:800,done:function(){t.count=0,t.status="wait",t.ele.remove(),t.trigger("end")}})},400),this}},t.fn.setColor=function(t){function n(t){var n=t.toString(16);return 1===n.length?"0"+n:n}function e(t){var e,i,o,s=t.match(/\((.*)\)/)[1].split(",");return e=+s[0],i=+s[1],o=+s[2],"#"+n(e)+n(i)+n(o)}function i(t){var n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(n,function(t,n,e,i){return n+n+e+e+i+i});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)].join(","):null}if(t){var o,s;return"#"===t[0]?(o=i(t),s=t):(o=t.match(/\((.*)\)/)[1],s=e(t)),this.color=s,this.ele.find(".ck-progress-bar").css({background:s,boxShadow:"0 0 10px 0 rgba("+o+",0.5)"}),this.ele.find(".ck-progress-bar-inner").css({background:s,boxShadow:"0 0 10px rgba("+o+",0.5)"}),this.ele.find(".ck-progress-circle").css({borderBottomColor:s,borderLeftColor:s}),this.trigger("setColor"),this}},t.fn.on=function(t,n,e){return this.callbacks[t]&&this.callbacks[t].length?this.callbacks[t].push({fn:n,context:e||this}):this.callbacks[t]=[{fn:n,context:e||this}],this},t.fn.trigger=function(t){return this.callbacks[t]&&this.callbacks[t].length?(this.callbacks[t].forEach(function(t){t.fn.call(t.context)}),this):void 0};var e={createInstance:function(){var n=new t;return this.instances.push(n),n},instances:[]};return e}),angular.module("ngComponentKit").directive("ckRipple",function(){return{link:function(t,n,e){n.addClass("ck-ripple");var i=n.find(".ck-ripple-ink");if("ck-ripple"!==e.ckRipple){var o=e.ckRipple;n.addClass("ck-ripple-"+o)}n.on("click",function(t){i.removeClass("ck-ripple-animate");var e=n.offset().left,o=n.offset().top,s=n[0].offsetWidth,a=n[0].offsetHeight,r=Math.max(s,a),c=t.pageX-e-r/2,l=t.pageY-o-r/2;i.css({width:r,height:r,top:l,left:c}),i.addClass("ck-ripple-animate")})},transclude:!0,template:'<span class="ck-ripple-ink"></span><span ng-transclude></span>'}}),angular.module("ngComponentKit").factory("template",function(){return function(t){var n,e=0,i='var text="';t.replace(/\${{(.*?)}}|$/g,function(n,o,s){i+=t.slice(e,s).replace(/"/g,'\\"'),e=s+n.length,i+='"+'+(o||'""')+'+"'}),i="with(obj){\n"+i+'";\n}\nreturn text;';try{n=new Function("obj",i)}catch(o){throw o.source=i,o}return function(t){return n.call(this,t)}}});