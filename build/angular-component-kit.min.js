angular.module("ngComponentKit",["ngAnimate","ngComponentKitTmpl"]),function(){"use strict";angular.module("ngComponentKitTmpl",[]).run(["$templateCache",function(t){t.put("modal/modal.html",'<div class="ck-modal-wrapper" ng-show="show"><div tabindex="-1" ng-class="{active: active}" ng-blur="blur()" ng-focus="focus()" class="ck-modal" ck-drag=".ck-modal-head" limit="true"><div class="ck-modal-head">{{title}}</div><div class="ck-modal-body" ng-transclude></div><div class="ck-modal-foot"><button ng-click="ok()" class="ck-btn ck-btn-blue" ck-ripple>Comfirm</button> <button ng-click="off($event)" class="ck-btn" ck-ripple="black">Close</button></div></div></div>'),t.put("notification/notification.html",'<div class="ck-notification ck-{{type}}" ng-style="style"><span>{{msg}}</span> <button class="ck-btn" ck-ripple ng-click="close()">Close</button></div>')}])}(),angular.module("ngComponentKit").directive("ckDrag",function(){var t={restrict:"A",link:function(t,n,i){function e(t){var i,l;"absolute"===d?(i=t.pageX,l=t.pageY,a={top:+n.css("top").split("px")[0],left:+n.css("left").split("px")[0]}):"fixed"===d&&(i=t.clientX,l=t.clientY,a=n.position()),angular.element("body").addClass("no-select"),c.off("mousedown",e),r.on("mousemove",o),r.on("mouseup",s),u.left=i,u.top=l,p&&(f.width=angular.element(window).width(),f.height=angular.element(window).height(),h.width=n.width(),h.height=n.height())}function o(t){var i,e;if("absolute"===d?(i=t.pageX,e=t.pageY):"fixed"===d&&(i=t.clientX,e=t.clientY),l.top=e-u.top,l.left=i-u.left,p){var o=a.top+l.top,s=a.left+l.left;o=0>=o?0:o,s=0>=s?0:s,o=o>=f.height-h.height?f.height-h.height:o,s=s>=f.width-h.width?f.width-h.width:s,n.css({top:o,left:s,bottom:"auto",right:"auto"})}else n.css({top:a.top+l.top,left:a.left+l.left,bottom:"auto",right:"auto"})}function s(){r.off("mousemove",o),r.off("mouseup",s),c.on("mousedown",e),angular.element("body").removeClass("no-select")}var a,c=i.ckDrag?n.find(i.ckDrag):n,r=angular.element(document),l={top:0,left:0},u={left:0,top:0},f={},h={},d=i.position||"absolute",p="true"===i.limit;angular.element("#no-select").length||angular.element("body").append('<style id="no-select">.no-select{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}</style>'),c.on("mousedown",e)}};return t}),angular.module("ngComponentKit").factory("event",function(){var t=[].slice;return{list:{},on:function(t,n,i,e){return this.list[t]&&this.list[t].length?this.list[t].push({fn:n,context:i||this,once:e}):this.list[t]=[{fn:n,context:i||this,once:e}],this},emit:function(n){var i=t.call(arguments,1),e=this;this.list[n]&&this.list[n].length&&angular.forEach(this.list[n],function(t){t.once&&t.called||(t.fn.apply(t.context,i),t.called=!0)}),angular.forEach(this.list,function(t,i){var o=i.split(".");o.pop(),o.join(".")===n&&e.emit(i)})},off:function(t,n){if(this.list[t])if(n)for(var i=0;i<this.list[t].length;i+=1){var e=this.list[t][i];e.fn===n&&(this.list[t].splice(i,1),i-=1)}else this.list[t].splice(this.list[t].length)}}}),angular.module("ngComponentKit").factory("ckNotify",function(t,n,i){var e={type:"normal",msg:"",position:{top:!0,right:!0},autoHide:!0,callback:function(){}},o=0,s={},a=function(i){var s=t.$new();s=angular.extend(s,e,i),s.count=o,o+=1;var a=n("<notification></notification>")(s);return angular.element("body").append(a),setTimeout(function(){a.addClass("ck-in")},10),s};return i.on("notification.rendered",function(t){var n=t.id,e=t.height,o=t.position;s[o]=s[o]||{},s[o][n]=e;var a=10;angular.forEach(s[o],function(t,n){i.emit("notification."+n+"."+o+".rePosition",a),a+=t+10})}),i.on("notification.close",function(t,n){i.emit("notification.rendered",{id:t,height:-10,position:n})}),a.normal=function(t){return a({msg:t,type:"normal"})},a.success=function(t){return a({msg:t,type:"success"})},a.error=function(t){return a({msg:t,type:"error"})},a.warning=function(t){return a({msg:t,type:"warning"})},a}).directive("notification",function(t){var n={templateUrl:"notification/notification.html",restrict:"E",replace:!0,link:function(n,i){function e(t){n.style[o]=t,n.$digest()}var o=n.position.top?"top":"bottom";n.style={top:n.position.top?0:"auto",bottom:n.position.bottom?0:"auto",left:n.position.left?10:"auto",right:n.position.right?10:"auto"},setTimeout(function(){t.emit("notification.rendered",{id:n.count,height:i.height()+26,position:o})},10),t.on("notification."+n.count+"."+o+".rePosition",e),n.close=function(){i.addClass("ck-close"),setTimeout(function(){i.remove(),n.$destroy(),t.emit("notification.close",n.count,o),t.off("notification."+n.count+"."+o+".rePosition",e)},300),"function"==typeof n.callback&&n.callback.call(this,n)},n.autoHide&&setTimeout(function(){n.close()},3e3)}};return n}),angular.module("ngComponentKit").directive("ckModal",function(){return{templateUrl:"modal/modal.html",transclude:!0,scope:{title:"=name",confirm:"&",close:"&",show:"="},link:function(t,n,i){function e(){t.show=!1}var o=angular.element(document),s=angular.element(window).height(),a=angular.element(window).width();t.active=!1,a>800?t.$watch("show",function(i){t.active=!!i,i?(n.find(".ck-modal").css({top:200,left:o.width()/2-400}),n.find(".ck-modal-body").css({maxHeight:s-400}),angular.element("body").addClass("ck-modal-open")):angular.element("body").removeClass("ck-modal-open")}):n.find(".ck-modal-body").css({maxHeight:s-132}),t.ok=function(){i.confirm?t.confirm({scope:t,close:e}):e()},t.off=function(){i.close?t.close({scope:t,close:e}):e()},t.blur=function(){t.active=!1},t.focus=function(){t.active=!0}},replace:!0}}),angular.module("ngComponentKit").directive("ckInput",["$compile",function(t){return{require:"ngModel",scope:{desc:"="},link:function(n,i,e,o){var s=['<span class="ck-input" ng-class="{up: hasValue, focus: focus, error: isError()}">','<span class="ck-input-desc">{{desc}}</span',"</span>"].join("");s=angular.element(t(s)(n)),i.before(s),s.append(i),i.on("focus",function(){n.focus=!0,n.$digest()}),i.on("blur",function(){n.focus=!1,n.$digest()}),n.$watch(function(){return o.$viewValue},function(t){n.hasValue=!!t}),n.isError=function(){return o.$invalid}}}}]),angular.module("ngComponentKit").directive("ckRipple",function(){return{link:function(t,n,i){n.addClass("ck-ripple");var e=n.find(".ck-ripple-ink");if("ck-ripple"!==i.ckRipple){var o=i.ckRipple;n.addClass("ck-ripple-"+o)}n.on("click",function(t){e.removeClass("ck-ripple-animate");var i=n.offset().left,o=n.offset().top,s=n[0].offsetWidth,a=n[0].offsetHeight,c=Math.max(s,a),r=t.pageX-i-c/2,l=t.pageY-o-c/2;e.css({width:c,height:c,top:l,left:r}),e.addClass("ck-ripple-animate")})},transclude:!0,template:'<span class="ck-ripple-ink"></span><span ng-transclude></span>'}}),angular.module("ngComponentKit").factory("ckProgressBar",function(){function t(){n+=1,this.instanceCount=n,this.count=0,this.autoIncrease=!1,this.intervalHandler=null,this.color="rgb(2, 141, 192)",this.status="wait",this.callbacks={}}var n=0;t.fn=t.prototype,t.fn.init=function(){var t=['<div class="ck-progress-wrapper"><span class="ck-progress-bar"><span class="ck-progress-bar-inner">','</span></span><span class="ck-progress-circle"></span></div>'].join("\n");return this.ele=angular.element(t),this.setColor(this.color),this.status="loading",angular.element("body").append(this.ele),this.trigger("init"),this},t.fn.start=function(){return"loading"!==this.status&&"prohibit"!==this.status?(this.init(),this.set(0),this.trigger("start"),this):void 0},t.fn.prohibit=function(){return this.status="prohibit",this},t.fn.increase=function(t){var n=this;if("loading"===this.status&&!this.autoIncrease)return t?(this.autoIncrease=!0,this.intervalHandler=setInterval(function(){return n.count=n.count+Math.floor(5*Math.random()),n.count>98?void n.stop():void n.set(n.count)},400)):this.set(this.count+Math.floor(5*Math.random())),this.trigger("increase"),this},t.fn.set=function(t){return"loading"===this.status?(this.count=t,this.ele.find(".ck-progress-bar").width(this.count+"%"),this.trigger("progress"),this):void 0},t.fn.stop=function(){return this.intervalHandler&&(clearInterval(this.intervalHandler),this.intervalHandler=null,this.autoIncrease=!1),this.trigger("stop"),this},t.fn.end=function(){if("loading"===this.status){var t=this;return this.stop(),this.set(100),this.autoIncrease=!1,setTimeout(function(){t.ele.fadeOut({duration:800,done:function(){t.count=0,t.status="wait",t.ele.remove(),t.trigger("end")}})},400),this}},t.fn.setColor=function(t){function n(t){var n=t.toString(16);return 1===n.length?"0"+n:n}function i(t){var i,e,o,s=t.match(/\((.*)\)/)[1].split(",");return i=+s[0],e=+s[1],o=+s[2],"#"+n(i)+n(e)+n(o)}function e(t){var n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(n,function(t,n,i,e){return n+n+i+i+e+e});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)].join(","):null}if(t){var o,s;return"#"===t[0]?(o=e(t),s=t):(o=t.match(/\((.*)\)/)[1],s=i(t)),this.color=s,this.ele.find(".ck-progress-bar").css({background:s,boxShadow:"0 0 10px 0 rgba("+o+",0.5)"}),this.ele.find(".ck-progress-bar-inner").css({background:s,boxShadow:"0 0 10px rgba("+o+",0.5)"}),this.ele.find(".ck-progress-circle").css({borderBottomColor:s,borderLeftColor:s}),this.trigger("setColor"),this}},t.fn.on=function(t,n,i){return this.callbacks[t]&&this.callbacks[t].length?this.callbacks[t].push({fn:n,context:i||this}):this.callbacks[t]=[{fn:n,context:i||this}],this},t.fn.trigger=function(t){return this.callbacks[t]&&this.callbacks[t].length?(this.callbacks[t].forEach(function(t){t.fn.call(t.context)}),this):void 0};var i={createInstance:function(){var n=new t;return this.instances.push(n),n},instances:[]};return i});